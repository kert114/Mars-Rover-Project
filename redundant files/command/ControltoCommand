import socket
import math, numpy as np, time, random


server_name = '127.0.0.1' 
server_port = 3000
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.settimeout(0.01) #10ms timeout for receives, after which silent error is thrown
connection = False
send_msg = "None"
send_msg_prev = "None"
msg  = "{A:x: 10,y: 20}" 
def network ():
	global recv_msg, send_msg, send_msg_prev, connection
	if connection == False:
		try:
			try: server_socket.connect((server_name, server_port))
			except:
				pass
			server_socket.send(msg.encode()) #Identifies which client is game
			print("Connected to Command")
			connection = True
		except:
			pass
		
		if send_msg != send_msg_prev: #Check whether to send
			try:
				server_socket.send(send_msg.encode())
				print(f"sent {send_msg}")
				send_msg = "aaaaaaaaaaaaaaaaaa"
			except:
				pass
		send_msg_prev = send_msg

running = True
if __name__ == "__main__":
	infrequent = 0
	while running: #switches between game and networking
		if infrequent%5 == 0: #Make networking infrequent to reduce lag
			network()
		infrequent += 1